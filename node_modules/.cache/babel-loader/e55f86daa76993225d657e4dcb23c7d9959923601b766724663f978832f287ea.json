{"ast":null,"code":"import { SORT_RATING, SORT_ALPHABETICALLY, FILTER_GAMES_GENRE, ORDER_CREATED, GET_GAMES_BY_NAME } from \"../actions/index\";\nconst initialState = {\n  games: []\n};\nfunction rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case \"GET_GAMES\":\n      return {\n        ...state,\n        games: action.payload\n      };\n    case SORT_RATING:\n      let sortRating = action.payload === 'Lowest to Highest Rating' ? state.games.sort((a, b) => {\n        if (a.rating > b.rating) {\n          return 1;\n        }\n        if (a.rating < b.rating) {\n          return -1;\n        }\n        return 0;\n      }) : state.games.sort((a, b) => {\n        if (a.rating > b.rating) {\n          return -1;\n        }\n        if (a.rating < b.rating) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        games: sortRating\n      };\n    case SORT_ALPHABETICALLY:\n      let sort = action.payload === 'A - Z' ? state.games.sort((a, b) => {\n        if (a.name > b.name) {\n          return 1;\n        }\n        if (a.name < b.name) {\n          return -1;\n        }\n        return 0;\n      }) : state.games.sort((a, b) => {\n        if (a.name > b.name) {\n          return -1;\n        }\n        if (a.name < b.name) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        games: sort\n      };\n    case FILTER_GAMES_GENRE:\n      const allGames = state.allGames;\n      const gamesApi = allGames.filter(el => el.genres.includes(action.payload));\n      const gamesDb = allGames.filter(el => {\n        for (let i = 0; i < el.genres.length; i++) {\n          if (el.genres[i].name === action.payload) {\n            return el;\n          }\n        }\n      });\n      const allFiltered = gamesApi.concat(gamesDb);\n      return {\n        ...state,\n        games: allFiltered\n      };\n    case ORDER_CREATED:\n      var aux;\n      if (action.payload === \"db\") {\n        aux = state.allGames.filter(ge => ge.createdAtDb);\n        if (!aux.length) aux = {\n          dbError: 'No games found'\n        };\n      } else {\n        aux = state.allGames.filter(ge => !ge.createdAtDb);\n      }\n      return {\n        ...state,\n        games: aux\n      };\n    case GET_GAMES_BY_NAME:\n      return {\n        ...state,\n        games: action.payload\n      };\n    default:\n      return state;\n  }\n}\nexport default rootReducer;","map":{"version":3,"names":["SORT_RATING","SORT_ALPHABETICALLY","FILTER_GAMES_GENRE","ORDER_CREATED","GET_GAMES_BY_NAME","initialState","games","rootReducer","state","action","type","payload","sortRating","sort","a","b","rating","name","allGames","gamesApi","filter","el","genres","includes","gamesDb","i","length","allFiltered","concat","aux","ge","createdAtDb","dbError"],"sources":["C:/Users/julia/OneDrive/Escritorio/piultimo/PI-Videogames-main/client/src/reducer/index.js"],"sourcesContent":["import{SORT_RATING,SORT_ALPHABETICALLY,FILTER_GAMES_GENRE,ORDER_CREATED,GET_GAMES_BY_NAME} from\"../actions/index\"\n\n\nconst initialState = {\n    games :[]\n}\n\nfunction rootReducer (state = initialState,action) {\n     switch (action.type){\n        case \"GET_GAMES\":\n            return{\n                ...state,\n                games:action.payload\n            }\n             case SORT_RATING:\n                let sortRating = action.payload === 'Lowest to Highest Rating' ?\n                state.games.sort((a,b) => {\n                    if(a.rating > b.rating){\n                        return 1;\n                    }\n                    if(a.rating < b.rating){\n                        return -1;\n                    }\n                    return 0;\n                }) : \n                state.games.sort((a,b) => {\n                    if(a.rating > b.rating){\n                        return -1;\n                    }\n                    if(a.rating < b.rating){\n                        return 1;\n                    }\n                    return 0;\n                })\n                return {\n                      ...state,\n                     games: sortRating\n                         }\n\n\n            case SORT_ALPHABETICALLY:\n                    let sort = action.payload === 'A - Z' ?\n                    state.games.sort((a,b) => {\n                    if(a.name > b.name){\n                    return 1;\n                    }\n                     if(a.name < b.name){\n                    return -1;\n                    }\n                    return 0;\n                    }) :  state.games.sort((a,b) => {\n                    if(a.name > b.name){\n                    return -1;\n                    }\n                    if(a.name < b.name){\n                    return 1;\n                    }\n                    return 0;\n                    })\n                    return {\n                       ...state,\n                       games: sort\n                             }\n  \n\n            case FILTER_GAMES_GENRE:\n                    const allGames = state.allGames\n                    const gamesApi = allGames.filter(el => el.genres.includes(action.payload))\n                    const gamesDb = allGames.filter((el) => {\n                    for(let i = 0; i < el.genres.length; i++){\n                    if(el.genres[i].name === action.payload){\n                        return el\n                       }\n                    }\n                     })\n                    const allFiltered = gamesApi.concat(gamesDb)\n                        return{\n                        ...state,\n                        games: allFiltered\n                               }\n\n\n            case ORDER_CREATED:\n                    var aux;\n                    if(action.payload === \"db\"){\n                    aux = state.allGames.filter(ge => ge.createdAtDb)\n                    if(!aux.length) aux= {dbError: 'No games found'}\n                    } else {\n                      aux = state.allGames.filter(ge=> !ge.createdAtDb)\n                     }\n                      return {\n                          ...state,\n                          games: aux\n                            }  \n            case GET_GAMES_BY_NAME:\n                      return {\n                          ...state,\n                          games: action.payload\n                     }\n\n\n\n            default:\n                return state;\n     }\n\n    \n}\n\nexport default rootReducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}