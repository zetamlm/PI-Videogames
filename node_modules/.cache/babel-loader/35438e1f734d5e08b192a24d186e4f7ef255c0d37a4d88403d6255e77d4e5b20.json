{"ast":null,"code":"import { SORT_RATING, SORT_ALPHABETICALLY, FILTER_GAMES_GENRE, ORDER_CREATED } from \"../actions/index\";\nconst initialState = {\n  games: [],\n  allGames: [],\n  genres: []\n};\nfunction rootReducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case \"GET_GAMES\":\n      return {\n        ...state,\n        games: action.payload,\n        allGames: action.payload\n      };\n    case GET_ALL_GENRES:\n      return {\n        ...state,\n        genres: action.payload\n      };\n    case SORT_RATING:\n      let sortRating = action.payload === 'Lowest to Highest Rating' ? state.games.sort((a, b) => {\n        if (a.rating > b.rating) {\n          return 1;\n        }\n        if (a.rating < b.rating) {\n          return -1;\n        }\n        return 0;\n      }) : state.games.sort((a, b) => {\n        if (a.rating > b.rating) {\n          return -1;\n        }\n        if (a.rating < b.rating) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        games: sortRating\n      };\n    case SORT_ALPHABETICALLY:\n      let sort = action.payload === 'A - Z' ? state.games.sort((a, b) => {\n        if (a.name > b.name) {\n          return 1;\n        }\n        if (a.name < b.name) {\n          return -1;\n        }\n        return 0;\n      }) : state.games.sort((a, b) => {\n        if (a.name > b.name) {\n          return -1;\n        }\n        if (a.name < b.name) {\n          return 1;\n        }\n        return 0;\n      });\n      return {\n        ...state,\n        games: sort\n      };\n    case FILTER_GAMES_GENRE:\n      const allGames = state.allGames;\n      const gamesApi = allGames.filter(el => el.genres.includes(action.payload));\n      const gamesDb = allGames.filter(el => {\n        for (let i = 0; i < el.genres.length; i++) {\n          if (el.genres[i].name === action.payload) {\n            return el;\n          }\n        }\n      });\n      const allFiltered = gamesApi.concat(gamesDb);\n      return {\n        ...state,\n        games: allFiltered\n      };\n    case ORDER_CREATED:\n      var aux;\n      if (action.payload === \"db\") {\n        aux = state.allGames.filter(ge => ge.createdAtDb);\n        if (!aux.length) aux = {\n          dbError: 'No games found'\n        };\n      } else {\n        aux = state.allGames.filter(ge => !ge.createdAtDb);\n      }\n      return {\n        ...state,\n        games: aux\n      };\n    default:\n      return state;\n  }\n}\nexport default rootReducer;","map":{"version":3,"names":["SORT_RATING","SORT_ALPHABETICALLY","FILTER_GAMES_GENRE","ORDER_CREATED","initialState","games","allGames","genres","rootReducer","state","action","type","payload","GET_ALL_GENRES","sortRating","sort","a","b","rating","name","gamesApi","filter","el","includes","gamesDb","i","length","allFiltered","concat","aux","ge","createdAtDb","dbError"],"sources":["C:/Users/julia/OneDrive/Escritorio/piultimo/PI-Videogames-main/client/src/reducer/index.js"],"sourcesContent":["import{SORT_RATING,\n    SORT_ALPHABETICALLY,\n    FILTER_GAMES_GENRE,\n    ORDER_CREATED,} from\"../actions/index\"\n\n\nconst initialState = {\n    games :[],\n    allGames:[],\n    genres: []\n}\n\nfunction rootReducer (state = initialState,action) {\n     switch (action.type){\n        case \"GET_GAMES\":\n            return{\n                ...state,\n                games:action.payload,\n                allGames:action.payload\n            }\n\n            case GET_ALL_GENRES:\n                return {\n                    ...state,\n                    genres: action.payload\n                }\n                \n             case SORT_RATING:\n                let sortRating = action.payload === 'Lowest to Highest Rating' ?\n                state.games.sort((a,b) => {\n                    if(a.rating > b.rating){\n                        return 1;\n                    }\n                    if(a.rating < b.rating){\n                        return -1;\n                    }\n                    return 0;\n                }) : \n                state.games.sort((a,b) => {\n                    if(a.rating > b.rating){\n                        return -1;\n                    }\n                    if(a.rating < b.rating){\n                        return 1;\n                    }\n                    return 0;\n                })\n                return {\n                      ...state,\n                     games: sortRating\n                         }\n\n\n            case SORT_ALPHABETICALLY:\n                    let sort = action.payload === 'A - Z' ?\n                    state.games.sort((a,b) => {\n                    if(a.name > b.name){\n                    return 1;\n                    }\n                     if(a.name < b.name){\n                    return -1;\n                    }\n                    return 0;\n                    }) :  state.games.sort((a,b) => {\n                    if(a.name > b.name){\n                    return -1;\n                    }\n                    if(a.name < b.name){\n                    return 1;\n                    }\n                    return 0;\n                    })\n                    return {\n                       ...state,\n                       games: sort\n                             }\n  \n\n            case FILTER_GAMES_GENRE:\n                    const allGames = state.allGames\n                    const gamesApi = allGames.filter(el => el.genres.includes(action.payload))\n                    const gamesDb = allGames.filter((el) => {\n                    for(let i = 0; i < el.genres.length; i++){\n                    if(el.genres[i].name === action.payload){\n                        return el\n                       }\n                    }\n                     })\n                    const allFiltered = gamesApi.concat(gamesDb)\n                        return{\n                        ...state,\n                        games: allFiltered\n                               }\n\n\n            case ORDER_CREATED:\n                    var aux;\n                    if(action.payload === \"db\"){\n                    aux = state.allGames.filter(ge => ge.createdAtDb)\n                    if(!aux.length) aux= {dbError: 'No games found'}\n                    } else {\n                      aux = state.allGames.filter(ge=> !ge.createdAtDb)\n                     }\n                      return {\n                          ...state,\n                          games: aux\n                            }  \n            \n\n\n\n            default:\n                return state;\n     }\n\n    \n}\n\nexport default rootReducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}